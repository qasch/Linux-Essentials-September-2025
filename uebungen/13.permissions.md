# Ãœbungen zu Berechtigungen unter Linux

>[!NOTE]
> Um einige Ãœbungen richtig durchfÃ¼hren zu kÃ¶nnen, kÃ¶nnte es sein, dass ihr die Berechtigungen auf euer Home-Verzeichnis anpassen mÃ¼sst. Falls es nicht mÃ¶glich ist, mit einem anderen User in das Verzeichnis zu wechseln, also z.B. mit dem User `karla` in das Heimatverzeichnis von `korni` schaut euch die Berechtigungen auf das Verzeichnis mit `ls -ld /home/korni` an und versucht zu verstehen, warum sie so gesetzt sind und euch daran hindern, mit einem fremden User dort hinein zu wechseln.
> 
> Um dies dennoch mÃ¶glich zu machen, kÃ¶nnte das Kommando `chmod 755 korni` hilfreich sein.
> Die User sind hier nur beispielhaft genannt, bei euch kÃ¶nnen das durchaus andere User sein, passt die Kommandos also dementsprechend an.
>
> **Tipp:** Ihr kÃ¶nnt fast jedem Kommando die Option `-v` Ã¼bergeben. Probiert das doch mal mit `chmod` aus, um genauer zu sehen, was passiert.

**Zusatz:** Wenn ihr wollt, kÃ¶nnt ihr das alles ja auch mal testen. Erstellt dazu eine neue Gruppe und weist dieser einen anderen Benutzer hinzu. So kÃ¶nntet ihr mit diesem Benutzer z.B. Gruppenberechtigungen testen. Nutzt zum Ã¤ndern der DateieigentÃ¼merrechte das Kommando `chown` (mit `root` Rechten).

Schreibrechte auf eine Datei kÃ¶nnt ihr testen, in dem ihr entweder mit einem Redirect oder Editor versucht, Inhalt in die Datei zu schreiben.

## **Ãœbung 1: Rechte einer Datei anzeigen**
Erstellt die Datei `datei.txt` und prÃ¼ft die Berechtigungen mit `ls -l datei.txt`.

ğŸ”¹ Was bedeuten die einzelnen Zeichen in der Ausgabe von `ls -l`?

## **Ãœbung 2: Berechtigungen mit symbolischer Rechtevergabe Ã¤ndern**
1. FÃ¼gt der Datei nun *Schreibrechte* fÃ¼r die *Gruppe* hinzu.
2. Entzieht der Datei die Leserechte fÃ¼r *Others*.
3. FÃ¼gt der Datei Lese- und Schreibrechte fÃ¼r die *Gruppe* und *Others* hinzu.
4. Setzt die Rechte so, dass *Gruppe* und *Others* die Datei nur *lesen* dÃ¼rfen.

Nutzt dafÃ¼r ausschliesslich die **symbolische** Rechtevergabe.

Spielt hier generell etwas mit der symbolischen Rechtevergabe herum, bis ihr euch sicher im Umgang damit fÃ¼hlt.

## **Ãœbung 3: Berechtigungen mit numerischer/oktaler Rechtevergabe setzen**
1. Setzt die Berechtigungen der Datei `datei.txt` auf `rw-r-----` bzw. so, dass nur der *Besitzer lesen und schreiben* kann, *Mitglieder der Gruppe Leserechte* haben und *alle anderen keine Rechte*.
1. Setzt die Berechtigungen der Datei `datei.txt` auf `rwxrw-r--`.
3. Setzt die Berechtigungen der Datei `datei.txt` auf `r-xr-xr-x`.
4. Setzt die Berechtigungen der Datei `datei.txt` auf `rwxr-x---`.

Nutzt dafÃ¼r ausschliesslich die **numerische/oktale** Rechtevergabe.

Spielt hier generell etwas mit der numerischen/oktalen Rechtevergabe herum, bis ihr euch sicher im Umgang damit fÃ¼hlt.

## Ãœbung 4: Wann symbolische und wann oktale Rechtevergabe?
Macht euch Gedanken darÃ¼ber, ob es komplett egal ist, wann wir die symbolische und wann die oktale Rechtevergabe verwenden. 

Oder gibt es jeweils Situationen, in denen eine der beiden MÃ¶glichkeiten vielleicht sinnvoller sein kÃ¶nnte?

## **Ãœbung 5: AusfÃ¼hrrechte fÃ¼r ein Skript setzen**
Erstellt eine neue Datei mit dem Namen `script.sh`.

Sorgt nun dafÃ¼r, dass die Datei die folgenden Berechtigungen erhÃ¤lt:

- Der Besitzer darf die Datei *lesen* und *schreiben*
- Mitglieder der Gruppe der Datei dÃ¼rfen die Datei nur *lesen*
- Alle anderen haben *keine Zugriffsrechte* auf die Datei

Ã–ffnet die Datei nun mit einem Editor und fÃ¼gt folgenden Inhalt hinzu:
```bash
#!/bin/bash
echo Ich bin ein Script!
```
GlÃ¼ckwunsch, ihr habt nun ein Script erstellt. Versucht es mit folgendem Kommando auszufÃ¼hren:
```bash
./script.sh
```
1. Ihr solltet nun eine Fehlermeldung erhalten. Welches Recht kÃ¶nnte hier fehlen? FÃ¼gt der Datei das entsprechende Recht hinzu und versucht sie erneut auszufÃ¼hren.

2. Wenn alles geklappt hat, entfernt nun das Leserecht auf die Datei und versucht, das Skript erneut auszufÃ¼hren. Warum klappt das nicht?

## **Ãœbung 6: credentials Datei erstellen**
Erstellt die Datei `credentials.txt` mit dem Inhalt `ganz doll geheim` und sorgt dafÃ¼r, dass deren Inhalt von niemandem auÃŸer euch selbst mehr gelesen oder verÃ¤ndert werden darf. PrÃ¼ft das im Anschluss mit einem anderen Benutzer. 

>[!NOTE] 
> Dazu mÃ¼sst ihr ggf. die Berechtigungen auf euer Home-Verzeichnis anpassen. PrÃ¼ft einmal mit dem Kommanod `ls -ld $HOME` ob die Berechtigungen wie folgt sind: `drwx------`. Falls ja, Ã¤ndert mit `chmod 755 $HOME` die Berechtigungen. Warum das nÃ¶tig ist, klÃ¤ren wir spÃ¤ter bzw. findet ihr das selbst in den anderen Ãœbungen heraus.

## **Ãœbung 7: Schreibrecht auf Dateien und Verzeichnisse**

Erstellt ein Verzeichnis `write-perm` mit den Dateien `write-perm-file` und `write-perm-dir` darin. 

Entfernt nun das Schreibrecht auf die Datei `write-perm-file`. 

1. KÃ¶nnt ihr noch Inhalt zur Datei hinzufÃ¼gen, z.B. mit `echo hallo > write-perm-file`? 
2. KÃ¶nnt ihr die Datei `write-perm-file` denn lÃ¶schen?

Entfernt nun das Schreibrecht auf das Verzeichnis. 

3. KÃ¶nnt ihr noch Inhalt zur Datei hinzufÃ¼gen, z.B. mit `echo hallo > write-perm-dir`? 
4. KÃ¶nnt ihr die Datei `write-perm-dir` lÃ¶schen?
5. KÃ¶nnt ihr noch eine neue Datei im Verzeichnis `write-perm` erstellen?

Was schliesst ihr daraus zur Bedeutung des Schreibrechts, gesetzt auf Dateien bzw. Verzeichnisse? Was ist der Unterschied?

## **Ãœbung 8: Verzeichnisse und ihre Berechtigungen**

Legt ein neues Verzeichnis `testdir` an und erzeugt mit `echo` und einem Redirect eine Datei mit Inhalt darin. Ã„ndert nun die Berechtigungen auf `600`. Ihr habt also noch Lese- und Schreibrechte auf das Verzeichnis. 

- Lasst euch nun den Inhalt des Verzeichnisses anzeigen. Nutzt einmal `ls` und danach `ls -l`.
- Versucht, euch den Inhalt der Datei `testdir/testfile` mit `cat` ausgeben zu lassen
- Versucht, neuen Inhalt in die Datei zu schreiben (mit einem doppelten Redirect oder einem Editor)
- Versucht, die Datei zu lÃ¶schen
- Versucht, mit `cd` in das Verzeichnis zu wechseln
```bash
mkdir testdir
echo irgendeintext > testdir/testfile
chmod 600 testdir
ls testdir
cat testdir/testfile
echo neuertext >> testdir/testfile
rm testdir/testfile
cd testdir
```
- Warum kommt es hier zu den Fehlermeldungen?
- Was schliesst ihr daraus Ã¼ber die Berechtigungen, die mindestens auf ein Verzeichnis gesetzt werden mÃ¼ssen?

## **Ãœbung 9: Rekursive Ã„nderung von Berechtigungen**
Erstellt ein Verzeichnis mit Namen `permissions` und  erstellt darin drei Dateien `file1`, `file2` und `file3`. Sorgt nun dafÃ¼r, dass alle Dateien im Verzeichnis `permissions` *schreibbar* fÃ¼r andere sind. Wendet das Kommando `chmod` also auf das gesamte  **Verzeichnis** inklusive Inhalt an.

ÃœberprÃ¼ft anschliessend, welche Berechtigungen nun auf das Verzeichnis an sich gesetzt sind mit dem Kommando `ls -ld permissions`.

## **Ãœbung 10: Rekursive Ã„nderung von Berechtigungen**
Wir wollen nun erreichen, dass alle im Verzeichnis enthaltenen Dateien die Berechtigungen `640` erhalten. FÃ¼hrt dazu das Kommando `chmod -R 640 permissions` aus. Versucht nun, mit `cd` hineinzuwechseln. PrÃ¼ft die Berechtigungen mit `ls -ld permissions`. 

ğŸ”¹ Was ist passiert? Wie lÃ¶st ihr das Problem? Was wÃ¤re cleverer gewesen, anstatt `chmod -R 640` zu verwenden?

## Ãœbung 11: Oktale Rechtevergabe
Erstellt die Datei `oktal.test` und fÃ¼hrt folgendes Kommando aus `chmod 42 oktal.test` aus. PrÃ¼ft anschliessend die Berechtigungen mit `ls -l`.

ğŸ”¹ Was fÃ¤llt euch auf? Was lernt ihr daraus, wie die oktale Rechtevergabe funktioniert?
